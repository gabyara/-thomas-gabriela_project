{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/gabriela/Documentos/proyecto/sr1-mast/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/gabriela/Documentos/proyecto/sr1-mast/client/src/components/FaceLogin.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  \\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport '../css/App.css';\nimport { Redirect } from 'react-router-dom';\nimport { Container, Row, Col } from 'reactstrap';\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nconst Contenedor = styled.div(_templateObject());\n\nclass FacebookLogin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setRedirectHome = () => {\n      this.setState({\n        redirect: true\n      });\n    };\n\n    this.renderRedirect = () => {\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: \"/homeUser\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.setRedirectPrincipal2 = () => {\n      this.setState({\n        redirect2: true\n      });\n      this.setState({\n        redirect2: false\n      });\n    };\n\n    this.renderRedirect2 = () => {\n      if (this.state.redirect2) {\n        return React.createElement(Redirect, {\n          to: \"/principal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.state = {\n      loggedStatus: false,\n      ID: 0,\n      redirect2: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      redirect2: false\n    });\n\n    window.fbAsyncInit = () => {\n      window.FB.init({\n        appId: '402202960407667',\n        xfbml: true,\n        version: 'v2.11'\n      });\n      window.FB.Event.subscribe(\"auth.statusChange\", response => {\n        this.statusChangeCallback(response);\n      });\n      this.checkLoginStatus();\n    };\n\n    (function (d, s, id) {\n      var js,\n          fjs = d.getElementsByTagName(s)[0];\n\n      if (d.getElementById(id)) {\n        return;\n      }\n\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  }\n\n  statusChangeCallback(response) {\n    console.log(response);\n\n    if (response.status == \"connected\") {\n      this.setState({\n        redirect2: false\n      });\n      this.setState({\n        loggedStatus: true,\n        userID: response.authResponse.userID\n      });\n      this.getPersonalData();\n      setTimeout(function () {\n        console.log(\"ID\", this.state.ID);\n        sessionStorage.setItem('id', this.state.ID);\n        this.setRedirectHome();\n      }.bind(this), 500);\n    } else {\n      console.log(\"salio\");\n      this.setState({\n        loggedStatus: false\n      });\n      sessionStorage.setItem('id', \"no-undefined\");\n      this.setRedirectPrincipal2();\n    }\n  }\n\n  checkLoginStatus() {\n    window.FB.getLoginStatus(response => this.statusChangeCallback(response));\n  }\n\n  getPersonalData() {\n    var url = \"/\" + this.state.userID + \"?fields=name,picture\";\n    window.FB.api(url, response => {\n      console.log(response);\n      console.log(response.id);\n      this.setState({\n        name: response.name,\n        picture: response.picture.data.url,\n        ID: response.id\n      });\n    });\n  }\n\n  showPersonalData() {\n    if (this.state.loggedStatus) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Bienvenido, \", this.state.name)), React.createElement(Col, {\n        sm: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.picture,\n        alt: \"foto no encontrada\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }))));\n    }\n  }\n\n  render() {\n    return React.createElement(Contenedor, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.showPersonalData(), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"fb-login-button face\",\n      \"data-max-rows\": \"1\",\n      \"data-size\": \"large\",\n      \"data-button-type\": \"continue_with\",\n      \"data-show-faces\": \"false\",\n      \"data-auto-logout-link\": \"true\",\n      \"data-use-continue-as\": \"false\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }))), this.renderRedirect(), this.renderRedirect2());\n  }\n\n}\n\nexport default FacebookLogin;","map":{"version":3,"sources":["/home/gabriela/Documentos/proyecto/sr1-mast/client/src/components/FaceLogin.js"],"names":["React","Component","styled","Redirect","Container","Row","Col","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","NavItem","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","Contenedor","div","FacebookLogin","constructor","props","setRedirectHome","setState","redirect","renderRedirect","state","setRedirectPrincipal2","redirect2","renderRedirect2","loggedStatus","ID","componentDidMount","window","fbAsyncInit","FB","init","appId","xfbml","version","Event","subscribe","response","statusChangeCallback","checkLoginStatus","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","console","log","status","userID","authResponse","getPersonalData","setTimeout","sessionStorage","setItem","bind","getLoginStatus","url","api","name","picture","data","showPersonalData","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport '../css/App.css';\nimport { Redirect } from 'react-router-dom'\nimport { Container, Row, Col } from 'reactstrap';\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem } from 'reactstrap';\n\nconst Contenedor = styled.div`\n  \n`;\n\n\nclass FacebookLogin extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      loggedStatus: false,\n      ID:0,\n      redirect2: false\n    }\n  }\n\n  componentDidMount(){\n    this.setState({\n      redirect2: false\n    })\n    window.fbAsyncInit = () => {\n      window.FB.init({\n        appId      : '402202960407667',\n        xfbml      : true,\n        version    : 'v2.11'\n      });\n\n      window.FB.Event.subscribe(\"auth.statusChange\", response => {\n        this.statusChangeCallback(response);\n      });\n\n      this.checkLoginStatus();\n    };\n  \n    (function(d, s, id){\n       var js, fjs = d.getElementsByTagName(s)[0];\n       if (d.getElementById(id)) {return;}\n       js = d.createElement(s); js.id = id;\n       js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n       fjs.parentNode.insertBefore(js, fjs);\n     }(document, 'script', 'facebook-jssdk'));\n  }\n\n  statusChangeCallback(response){\n    console.log(response);\n    if(response.status == \"connected\"){\n      this.setState({\n        redirect2: false\n      })\n      \n      this.setState({\n        loggedStatus: true,\n        userID: response.authResponse.userID\n      });\n      this.getPersonalData();\n      setTimeout(function(){ \n        console.log(\"ID\",this.state.ID) \n        sessionStorage.setItem('id',this.state.ID);\n        this.setRedirectHome();\n    }.bind(this), 500);\n    \n    } else {\n      console.log(\"salio\")\n      this.setState({\n        loggedStatus: false\n      });\n      sessionStorage.setItem('id',\"no-undefined\")\n      this.setRedirectPrincipal2()\n    }\n  }\n\n  checkLoginStatus(){\n    window.FB.getLoginStatus(response => this.statusChangeCallback(response));\n  }\n\n  getPersonalData(){\n    var url = \"/\" + this.state.userID + \"?fields=name,picture\";\n    window.FB.api(url, response => {\n      console.log(response);\n      console.log(response.id);\n      this.setState({\n        name: response.name,\n        picture: response.picture.data.url,\n        ID:response.id\n      });\n      });\n  }\n\n  showPersonalData(){\n    if(this.state.loggedStatus){\n      return (\n        <div>\n          <Row>\n           <Col sm={5}>\n          <p>Bienvenido, {this.state.name}</p>\n          </Col>\n          <Col sm={3}>\n          <img src={this.state.picture} alt=\"foto no encontrada\"/>\n          </Col>\n          </Row>\n        </div>\n      );\n    }\n  }\n  setRedirectHome = () => {\n\n    this.setState({\n      redirect: true\n    })\n\n  }\n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return <Redirect to='/homeUser' />\n    }\n  }\n\n  setRedirectPrincipal2 = () => {\n    this.setState({\n      redirect2: true\n    })\n    this.setState({\n      redirect2: false\n    })\n  }\n  renderRedirect2 = () => {\n    if (this.state.redirect2) {\n      return <Redirect to='/principal' />\n    }\n  }\n\n  render() {\n    return (\n      <Contenedor>\n       \n        {this.showPersonalData()}\n        <Row>\n        <Col sm={5}>\n        <div className=\"fb-login-button face\" \n             data-max-rows=\"1\" \n             data-size=\"large\" \n             data-button-type=\"continue_with\" \n             data-show-faces=\"false\" \n             data-auto-logout-link=\"true\" \n             data-use-continue-as=\"false\">\n          </div>\n          </Col>\n        </Row>\n          {this.renderRedirect()}\n          {this.renderRedirect2()}\n      </Contenedor>\n    );\n  }\n}\n\nexport default FacebookLogin;\n\n\n\n"]},"metadata":{},"sourceType":"module"}